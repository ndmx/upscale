{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}
    <h1>Welcome, {{ user.name }}!</h1>
    <p>Your payment plan: {{ user.payment_plan | capitalize }}</p>
    <h2>Enrolled Courses</h2>
    {% for course in courses %}
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">{{ course.title }}</h5>
                <p class="card-text">{{ course.description }}</p>
                <h6>Modules:</h6>
                <ul class="list-group">
                    {% for module in course.modules %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ module.title }}
                            {% if progresses.get(module.id) %}
                                <span class="badge bg-success">Completed</span>
                            {% else %}
                                <a href="{{ url_for('view_module', module_id=module.id) }}" class="btn btn-sm btn-primary">Start</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
                {% if recommendations.get(course.id) %}
                    <p class="mt-2"><strong>Recommended Next:</strong> {{ recommendations[course.id] }}</p>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% endblock %}

